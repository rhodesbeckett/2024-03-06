@require '~styles/variables'
@require '../../../../lib/gj-lib-client/stylus/common/mixins'

.game-thumbnail

	$zindex-tags = 3
	$zindex-controls = 3

	position: relative
	display: block
	margin-bottom: $grid-gutter-width-xs

	@media $media-sm-up
		margin-bottom: $grid-gutter-width

	// If a video is active, hide the tag.
	&.active
		.game-thumbnail-video-tag
			display: none

	// Hide these when hovered so there's more info to view the image.'
	&:hover
		.game-thumbnail-pricing
		.game-thumbnail-tag
		.game-thumbnail-video-tag
			display: none

	&-controls
		position: absolute
		top: 0
		right: 5px
		z-index: $zindex-controls

	// Hide the image until it's loaded in.
	&.loaded

		.game-thumbnail-img
			opacity: 1

		.game-thumbnail-thumb::after
			display: block

	&-img
		opacity: 0
		transition: opacity 500ms

	&-thumb
		position: relative
		height: 0
		padding-top: 56.25%  // HD 16:9
		overflow: hidden
		background-color: $gray-lightest

		.fill-dark &
		.fill-darker &
		.fill-darkest &
			background-color: $black

		> .jolticon
			position: absolute
			font-size: 16px * 4
			left: 50%
			margin-left: -(@font-size / 2)
			top: @left
			margin-top: @margin-left
			color: $gray-lighter

		&::after
			display: none
			content: ''
			position: absolute
			bottom: 0
			left: 0
			right: 0
			height: 30px
			background-image: linear-gradient( to bottom, transparent 0%, rgba( $black, 0.35 ) 100% )
			z-index: 2

	&-meta
		position: relative
		padding-top: 7px

	&-avatar
		img-circle()
		position: absolute
		left: -20px
		top: -20px
		width: 40px
		height: 40px
		background-color: $white
		border: 3px solid $gray-lightest
		z-index: 3

	&-dev
		text-overflow()
		position: absolute
		top: -20px
		left: 30px
		right: 100px
		color: $white
		font-weight: bold
		font-size: $font-size-h6
		text-shadow: 0 0 4px rgba( $black, 0.8 )
		z-index: 3

	&-title
		text-overflow()
		margin: 0
		margin-left: 30px
		line-height: 1.3
		font-weight: bold
		color: $gray-darker

		.fill-dark &
		.fill-darker &
		.fill-darkest &
			color: $gray-lightest

	&-os
		float: right
		margin-left: 5px

	&-meter
		margin-left: 5px
		float: right

		.meter
			display: inline-block

	&-rating-count
		color: $text-muted
		font-size: $font-size-tiny
		margin-right: 2px

	&-video-tag
		position: absolute
		bottom: 0
		left: 5px
		padding: 5px
		padding-bottom: 3px
		color: $gj-blue
		background-color: rgba( $black, 0.8 )
		z-index: $zindex-tags

	&-tag
		position: absolute
		left: 0
		top: 10px
		z-index: $zindex-tags
		color: $gj-blue
		background-color: $gray-darkest

	&-pricing
		position: absolute
		height: 30px
		line-height: @height
		top: -(@height)
		right: 5px
		padding: 0 10px
		text-align: center
		z-index: $zindex-tags

		&-owned
			& ^[-1]-tag
				color: inherit

		&-amount
			color: $white
			font-size: $font-size-small

		&-currency
			color: $gray-lighter

		&-decimal
			font-size: $font-size-small

		&-tag
			color: $white
			font-size: $font-size-tiny
			font-weight: bold
			text-transform: uppercase

			&.muted
				color: $gray-lighter


		// This is way too complex.
		&-sale
			height: 36px
			line-height: @height
			top: -(@height)

			.game-thumbnail-pricing

				&-sale-percentage
					display: inline-block
					vertical-align: top
					margin-left: -10px
					margin-right: 10px
					padding-left: 10px
					padding-right: 10px
					height: 36px
					line-height: @height
					font-weight: bold
					background-color: $gj-green
					color: $black

				&-container
					display: inline-block
					height: 36px
					padding-top: 3px
					padding-bottom: 3px
					vertical-align: top

				&-amount
					line-height: 20px

				&-amount-old
					color: $gray-lighter
					text-decoration: line-through
					font-size: $font-size-tiny
					line-height: 10px
					vertical-align: text-bottom
