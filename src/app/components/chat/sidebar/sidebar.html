<div class="chat-sidebar fill-darkest">

	<!-- Public Chat Rooms -->
	<div class="chat-rooms-list">

		<div class="nav-heading first">
			Public Chat Rooms
		</div>

		<ul class="shell-nav">
			<li v-for="room of client.publicRooms" :key="room.id">
				<a
					@click="onPublicRoomClicked( room.id )"
					:class="{ active: client.room && client.room.id === room.id }"
					:title="room.title"
					>
					<span class="tag tag-pink notifications-tag"
						v-if="client.roomId === room.id && Chat.roomNotifications"
						>
						{{ Chat.roomNotifications | number }}
					</span>
					<span class="shell-nav-icon">
						<app-jolticon icon="number-sign" />
					</span>
					<span class="shell-nav-label">
						{{ room.title }}
					</span>
				</a>
			</li>
		</ul>
	</div>

	<!-- Friends List -->
	<!-- Only include if not a guest -->
	<div class="chat-friends-list" v-if="client.currentUser && client.friendsPopulated">

		<div v-if="client.friendsPopulated && !client.friendsList.collection.length">
			<div class="nav-heading">
				Friends
			</div>
			<div class="alert alert-warning">
				No friends yet.
			</div>
			<div class="alert fill-dark">
				<!--chat.no_friends_message_html-->
			</div>
		</div>

		<!--
			Mobile is slow to compile really long friend lists.
			We split out online/offline friends on mobile so that it's fast to display/compile.
			Will also do it if they have more than 50 friends to keep the site fast.
		-->
		<div v-if="Screen.isXs || client.friendsList.collection.length > 50">
			<div v-if="client.friendsList.onlineCount">
				<div class="nav-heading">
					<span class="badge badge-active"
						v-if="client.friendsList.onlineCount > 0"
						>
						{{ client.friendsList.onlineCount | number }}
					</span>
					<span>Online Friends</span>
				</div>

				<app-chat-user-list
					:users="onlineFriends"
					:show-pm="true"
					>
				</app-chat-user-list>
			</div>

			<div v-if="client.friendsList.offlineCount">
				<a class="nav-heading"
					@click="shouldShowOfflineFriends = !shouldShowOfflineFriends"
					>
					<span class="badge">
						{{ client.friendsList.offlineCount | number }}
					</span>
					<span>[{{ shouldShowOfflineFriends ? '-' : '+' }}]</span>
					<span>Offline Friends</span>
				</a>

				<app-chat-user-list
					v-if="shouldShowOfflineFriends"
					:users="offlineFriends"
					:show-pm="true"
					>
				</app-chat-user-list>
			</div>
		</div>

		<div v-if="!Screen.isXs && client.friendsList.collection.length <= 50">
			<div v-if="client.friendsList.collection.length">
				<div class="nav-heading">
					<span class="badge">
						{{ client.friendsList.collection.length | number }}
					</span>
					<span class="badge badge-active"
						v-if="client.friendsList.onlineCount > 0"
						>
						{{ client.friendsList.onlineCount | number }}
					</span>
					<span>Friends</span>
				</div>

				<app-chat-user-list
					:users="client.friendsList.collection"
					:show-pm="true"
					>
				</app-chat-user-list>
			</div>
		</div>

	</div>

</div>
