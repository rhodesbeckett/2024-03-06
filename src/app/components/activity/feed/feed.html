<div class="activity-feed timeline-list full-bleed">
	<div oc-lazy-load="{ files: [ '/app/modules/hammer.js' ] }">

		<!--
			Note that our ng-repeat track by includes updated on.
			This way it will update the whole div when the post changes.
			This allows us to bind-once within the post, and still update during changes.
		-->
		<div class="timeline-list-item"
			ng-class="::{ 'anim-fade-in-right no-animate-leave stagger': !$ctrl.wasHistorical }"
			ng-repeat="item in $ctrl.feed.items track by item.id"
			id="activity-feed-item-{{ ::item.id }}"
			in-view="$ctrl.onItemInViewChange( $inview, item )"
			>

			<div ng-switch="::item.type">
				<div ng-switch-when="devlog-post" ng-switch="::item.feedItem.type">
					<gj-activity-feed-devlog-post-text
						ng-switch-when="text"
						item="::item"
						is-new="::$ctrl.isItemUnread( item )"
						on-click="$ctrl.setActive( item )"
						on-expand="$ctrl.onItemExpanded( item )"
						>
					</gj-activity-feed-devlog-post-text>

					<gj-activity-feed-devlog-post-media
						ng-switch-when="media"
						item="::item"
						is-new="::$ctrl.isItemUnread( item )"
						on-click="$ctrl.setActive( item )"
						on-expand="$ctrl.onItemExpanded( item )"
						>
					</gj-activity-feed-devlog-post-media>
				</div>

				<gj-activity-feed-notification
					ng-switch-when="notification"
					item="::item"
					is-new="::$ctrl.isItemUnread( item )"
					on-click="$ctrl.setActive( item )"
					>
				</gj-activity-feed-notification>
			</div>

		</div>

		<div class="page-cut" ng-if="!$ctrl.feed.reachedEnd">
			<button class="btn btn-outline" ng-click="$ctrl.loadMore()">
				<span translate>Load More</span>
			</button>
		</div>

		<div class="alert alert-info" ng-if="$ctrl.feed.reachedEnd" translate>
			A wild Snorlax blocks your path. Looks like it's the end of the road for you.
		</div>

	</div>
</div>
