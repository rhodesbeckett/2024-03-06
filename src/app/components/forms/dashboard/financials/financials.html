<form gj-form="formModel" name="financialsForm" class="dash-financials-form">

	<gj-loading ng-if="!formState.isLoaded"></gj-loading>

	<div ng-if="formState.isLoaded">

		<!--
			First step is to sign the distribution agreement.
		-->
		<fieldset>
			<legend>
				<span ng-if="account" class="pull-right done-icon" tooltip="You have completed this section.">
					<span class="jolticon jolticon-check big"></span>
				</span>
				Distribution Agreement
			</legend>

			<div ng-if="!account">

				<div class="tos-scroller overlay-scrollbar overlay-scrollbar-light">
					<p>This is a binding agreement between Lucent Web Creative LLC, a Pennsylvania limited liability company (dba Game Jolt) (“Us” or “Game Jolt”), and you, the Account holder that accepts this Agreement (“You” or “Developer”).</p>

					<p>Please read this whole agreement, as it contains the terms of your relationship with Game Jolt and your use of the Game Jolt Marketplace to sell games and other goods.</p>

					<p>By agreeing to this, you’re also agreeing to our Terms of Service and Privacy Policy, which are incorporated into this agreement.</p>
				</div>
				<br>

				<p class="help-block">By clicking "I Agree", you are agreeing to the Distribution Agreement terms set forth above.</p>

				<button
					class="btn btn-success-outline"
					ng-click="onSubmit()"
					>
					<span class="jolticon jolticon-checkbox"></span>
					I Agree
				</button>

			</div>

			<div class="form-group" ng-if="account.tos_signed">
				<p class="small">You have agreed to our <a href="">Distribution Agreement</a> on {{ account.tos_signed_timestamp | date:'medium' }}.<p>
			</div>

		</fieldset>

		<fieldset ng-if="account">
			<legend>
				<span ng-if="user.paypal_id" class="pull-right done-icon" tooltip="You have completed this section.">
					<span class="jolticon jolticon-check big"></span>
				</span>
				PayPal Account
			</legend>

			<div class="form-group">

				<div ng-if="!user.paypal_id">
					<p class="small">You'll need to link your PayPal account to receive payments from Game Jolt.</p>
				</div>

				<div ng-if="user.paypal_id">
					<p class="small">You can change the PayPal account that we use for automatic withdrawals at any time.</p>
					<label class="control-label">Current PayPal Account</label>
					<div class="form-static">{{ user.paypal_email_address }}</div>
					<br>
				</div>

				<button
					class="btn btn-primary-outline"
					ng-click="linkPayPal()"
					>
					<span ng-if="!user.paypal_id">Link PayPal Account</span>
					<span ng-if="user.paypal_id">Change PayPal Account</span>
				</button>
			</div>
		</fieldset>

		<fieldset ng-if="account.is_verified">
			<legend>Percentage Split</legend>

			<p class="small">You're able to decide how much you think we deserve from your sales. <strong>We won't allow you to give us more than 10%.</strong></p>

			<p class="small">If you feel like supporting Game Jolt, we'd rather you spend your revenue on buying games from other developers. We have a Wallet system to help in this!</p>

			<div class="form-group">
				<rzslider
					rz-slider-model="formModel.percentage_split"
					rz-slider-options="sliderOptions"
					>
				</rzslider>
			</div>

		</fieldset>

		<fieldset ng-if="account.is_verified">
			<legend>Wallet</legend>

			<p class="small">We store up to a certain amount of money in your Wallet. You can use this money to buy other games on the site from other developers.</p>

			<p class="small">When you buy using your Wallet, money goes directly to the developer. We never take a cut for sales when you pay with your Wallet, and there are no payment processing fees.</p>

			<form-group
				name="wallet_maximum"
				label="Max. Wallet Amount"
				>
				<p class="help-block">
					You can store up to {{ maxWallet / 100 | currency:'$' }} USD in your Wallet. <br>
					You can turn off the Wallet by setting it to $0.
				</p>

				<input-group>
					<input-group-addon>
						$
					</input-group-addon>
					<input
						form-control="number"
						gj-form-currency-input
						step="1"
						ng-max="maxWallet / 100"
						ng-min="0"
						>
				</input-group>
				<control-errors></control-errors>
			</form-group>

		</fieldset>

		<fieldset ng-if="account.is_verified">
			<legend>Minimum Payout</legend>

			<p class="small">Lorem ipsum.</p>

			<form-group
				name="payout_minimum"
				label="Min. Payout Amount"
				>
				<p class="help-block">
					The max you can set this to is {{ maxPayout / 100 | currency:'$' }} USD. <br>
					You can turn this off by setting it to $0, but note that we won't be able to send you money unless you have more than {{ minWithdraw / 100 | currency:'$' }} in your account.
				</p>

				<input-group>
					<input-group-addon>
						$
					</input-group-addon>
					<input
						form-control="number"
						gj-form-currency-input
						step="1"
						ng-max="maxPayout / 100"
						ng-min="0"
						>
				</input-group>
				<control-errors></control-errors>
			</form-group>

		</fieldset>

		<button
			gj-form-submit-button
			ng-if="account.is_verified"
			class="btn"
			ng-click="onSubmit()"
			>
			<span class="jolticon jolticon-edit"></span>
			Save
		</button>
	</div>

</form>
