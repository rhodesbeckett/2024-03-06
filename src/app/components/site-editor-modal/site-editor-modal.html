<app-modal>

	<div class="site-editor-modal-backdrop anim-fade-in"></div>

	<div
		class="site-editor-modal fill-darkest"
		:class="'site-editor-modal-tab-' + tab"
		>
		<div class="site-editor-modal-body">

			<app-loading v-if="!isLoaded" />
			<div v-else>

				<div class="site-editor-modal-nav">

					<nav class="navbar">
						<div class="navbar-left">
							<ul class="navbar-items">
								<li>
									<a :class="{ active: tab === 'theme' }" @click="tab = 'theme'">
										<translate>Customize Theme</translate>
									</a>
								</li>
								<li>
									<a :class="{ active: tab === 'content' }" @click="tab = 'content'">
										<translate>Edit Content</translate>
									</a>
								</li>
							</ul>
						</div>

						<div class="navbar-center">

						</div>

						<div class="navbar-right">
							<div class="navbar-controls">

								<button class="btn btn-success-outline" @click="save()">
									<translate>Save</translate>
								</button>

								<button class="btn btn-danger-outline" @click="close()">
									<translate>Close</translate>
								</button>

							</div>
						</div>
					</nav>

				</div>

				<div
					class="site-editor-modal-sidebar scrollable overlay-scrollbar anim-fade-enter-left anim-fade-leave-left"
					v-if="tab === 'theme'"
					>
					<div class="well">

						<h3 class="sans-margin-top">
							<translate>Choose a Theme</translate>
						</h3>

						<p class="small text-muted">
							<translate>Themes decide the layout and general styling of your site.</translate>
						</p>

						<app-theme-selector
							:templates="templates"
							:current-template="currentTemplateId"
							@change="currentTemplateId = $event"
							/>

						<div v-if="!!currentTemplateId">
							<h3>
								<translate>Customize Theme</translate>
							</h3>

							<div v-for="templateId of [ currentTemplateId ]" :key="templateId">
								 <app-theme-editor
									window-id="site-editor-modal-iframe"
									:resource-id="site.id"
									:template="templateId"
									:theme="theme.data"
									@change="themeEdited"
									/>
							</div>
						</div>

					</div>
				</div>

				<div
					class="site-editor-modal-bottom scrollable overlay-scrollbar anim-fade-enter-up anim-fade-leave-down"
					v-if="tab === 'content'"
					>
					<div class="well">

						content block editor
						<!-- <app-content-block-editor
							window-id="site-editor-modal-iframe"
							:site="site"
							:content-block="site.content_blocks[0]"
							@change="contentEdited()"
							/> -->

					</div>
				</div>

				<div class="site-editor-modal-content">
					<iframe id="site-editor-modal-iframe" :src="siteUrl"></iframe>
				</div>

			</div>
		</div>
	</div>

</app-modal>
