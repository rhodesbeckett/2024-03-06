<header class="section">
	<div class="container">

		<h1 translate>Reports</h1>
		<br>

		<div class="row">
			<div class="col-sm-5 col-md-6">
				<strong>Game</strong>
				<br>
				<em>Tea Time With Luap Sere...</em>
			</div>
			<div class="col-md-6 text-right">

				<nav class="platform-list inline">
					<ul>
						<li>
							<a ng-class="{ active: reportsCtrl.period == 'monthly' }" ng-click="reportsCtrl.period = 'monthly'">
								Monthly
							</a>
							<a ng-class="{ active: reportsCtrl.period == 'all' }" ng-click="reportsCtrl.period = 'all'">
								All-Time
							</a>
						</li>
					</ul>
				</nav>

				<div class="reports-month-selector">
					<a class="btn btn-outline btn-sparse">
						<span class="jolticon jolticon-chevron-left"></span>
					</a>

					<strong>
						February 2016
						<span class="jolticon jolticon-trans-down"></span>
					</strong>

					<a class="btn btn-outline btn-sparse">
						<span class="jolticon jolticon-chevron-right"></span>
					</a>
				</div>

			</div>
		</div>

	</div>
</header>

<div gj-expand-when="reportsCtrl.period == 'monthly'">
	<gj-graph-widget
		graph-widget-url="/web/dash/reports/graph/{{ reportsCtrl.resource }}/{{ reportsCtrl.eventType }}/{{ reportsCtrl.resourceId }}"
		graph-widget-hide-table="true"
		>
	</gj-graph-widget>
</div>

<div oc-lazy-load="{ files: [ '/app/modules/graphs.js' ] }">
	<section class="section section-thin">
		<div class="container">

			<div class="row">
				<div class="col-sm-4 col-md-3" ng-repeat="stat in reportsCtrl.stats track by stat.label">

					<a class="stat-graph-overlay"
						ng-class="{ active: reportsCtrl.eventType == stat.eventType }"
						ng-click="reportsCtrl.changeReport( stat )"
						>

						<gj-graph
							ng-if="reportsCtrl[ stat.eventType ] && reportsCtrl.period == 'monthly'"
							dataset="reportsCtrl[ stat.eventType ].graph"
							background-variant
							>
						</gj-graph>

						<div class="stat-big">
							<div class="stat-big-label">
								{{ stat.label }}
							</div>
							<div class="stat-big-digit" ng-switch="stat.type">
								<span ng-switch-when="number">
									{{ reportsCtrl.getStatValue( stat ) | number }}
								</span>

								<span ng-switch-when="currency">
									{{ reportsCtrl.getStatValue( stat ) / 100 | currency }}
								</span>
							</div>
						</div>
					</a>

				</div>
			</div>

		</div>
	</section>

	<hr>

	<section class="section">
		<div class="container">

			<h2 class="section-header">Top Sources</h2>

			<div class="row">
				<div class="col-sm-6">

					<table class="table table-striped table-condensed">
						<thead>
							<tr>
								<th>Source</th>
								<th class="text-right">Views</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>gamejolt.com</td>
								<td class="text-right">{{ 1232 | number }}</td>
							</tr>
							<tr>
								<td>youtube.com</td>
								<td class="text-right">{{ 1200 | number }}</td>
							</tr>
							<tr>
								<td>twitter.com</td>
								<td class="text-right">{{ 989 | number }}</td>
							</tr>
							<tr>
								<td>reddit.com</td>
								<td class="text-right">{{ 300 | number }}</td>
							</tr>
							<tr>
								<td>Other</td>
								<td class="text-right">{{ 1232 | number }}</td>
							</tr>
						</tbody>
					</table>

				</div>
				<div class="col-sm-6">

					<gj-graph
						type="doughnut"
						dataset="reportsCtrl.test"
						>
					</gj-graph>

				</div>
			</div>

		</div>
	</section>
</div>
