<div class="route-discover-games-view" v-if="game">
	<app-game-maturity-block :game="game">

		<section class="section section-thin fill-darkest"
			v-if="app.user && app.user.id === game.developer.id"
			>
			<div class="container text-center">

				<a
					class="btn btn-outline hidden-xs"
					ui-sref="dashboard.analytics.view( { resource: 'Game', resourceId: game.id } )"
					>
					<app-jolticon icon="chart" />
					<translate>View Analytics</translate>
				</a>

				<a
					class="btn btn-outline"
					ui-sref="dashboard.developer.games.manage.game.overview( { id: game.id } )"
					>
					<app-jolticon icon="cog" />
					<translate>Manage Game</translate>
				</a>

			</div>
		</section>

		<!--
			Don't affix the nav on download pages.
			It takes a lot of space out vertically when on small browser size.
		-->
			<!--:should-affix-nav="!$state.includes( 'discover.games.view.download' )"-->
		<app-page-header
			:cover-media-item="game.header_media_item"
			>

			<!--<div
				slot="cover-buttons"
				class="game-header-cover-buttons"
				v-if="
					!Screen.isXs
					&& (installableBuilds.length || browserBuilds.length || game._can_buy_primary_sellable)
				"
				>-->
					<!--&& $state.is( 'discover.games.view.overview' )-->
				<!--<gj-game-cover-buttons
					game="game"
					packages="packages"
					installable-builds="installableBuilds"
					browser-builds="browserBuilds"
					on-show-multiple-packages="scrollToMultiplePackages()"
					on-show-package-payment="scrollToPackagePayment( $package )"
					>
				</gj-game-cover-buttons>-->
			<!--</div>-->

			<app-user-avatar
				slot="spotlight"
				:user="game.developer"
				/>

			<app-discover-games-view-nav
				slot="nav"
				:game="game"
				:posts-count="postsCount"
				:comments-count="commentsCount"
				@report="report"
				/>

			<app-discover-games-view-controls
				slot="controls"
				:game="game"
				/>

			<h1 :class="{ h2: Screen.isMobile }">
				<router-link :to="{ name: 'discover.games.view.overview' }">
					{{ game.title }}
				</router-link>
			</h1>

			<div>
				<translate>by</translate>
				<router-link :to="{ name: 'profile.overview', params: { username: game.developer.username } }">
					{{ game.developer.display_name }}
					<small>@{{ game.developer.username }}</small>
				</router-link>

				<!--
					Hide on mobile to keep it clean.
					They can view in the game details.
				-->
				<span class="small" v-if="!Screen.isXs && game.published_on">
					<span class="dot-separator"></span>
					<router-link
						:to="{
							name: 'discover.games.list._fetch-date',
							params: {
								section: 'by-date',
								date: date( game.published_on, 'YYYY-MM-DD' ),
							},
						}"
						>
						<app-time-ago :date="game.published_on" />
					</router-link>
				</span>

				<span v-if="game.tigrs_age || game.ratings_enabled">
					<span class="dot-separator hidden-xs"></span>
					<br class="visible-xs">
					<br class="visible-xs">

					<app-game-ogrs-tag
						v-if="game.tigrs_age"
						:game="game"
						/>

					<span v-if="!game._is_devlog && game.ratings_enabled">
						<span class="dot-separator"></span>
						<app-meter
							:big="true"
							:dark="true"
							:rating="game.avg_rating"
							v-app-tooltip="ratingTooltip"
							/>
					</span>
				</span>
			</div>

		</app-page-header>

		<router-view
			:game="game"
			:user-rating="userRating"
			:rating-breakdown="ratingBreakdown"
			/>

	</app-game-maturity-block>
</div>
