<section class="section section-thin" ng-if="!Environment.isClient && !Screen.isXs">
	<gj-ad ad-size="leaderboard"></gj-ad>
</section>

<section class="section fill-lightest nav-only">
	<div class="container">
		<gj-game-filtering-widget
			gj-filtering-container="gamesCtrl.filteringContainer"
			>
		</gj-game-filtering-widget>
	</div>
</section>

<!--
	Use ng-show so that the ui-view gets loaded in.
-->
<section class="section">
	<div class="container" id="games">

		<div class="clearfix">

			<!--
				On mobile we show the filtering input above.
			-->
			<gj-game-filtering-input
				ng-if="Screen.isSm || (Screen.isXs && gamesCtrl.filteringContainer.filters.query)"
				gj-filtering-container="gamesCtrl.filteringContainer"
				>
			</gj-game-filtering-input>

			<gj-game-filtering-tags
				gj-filtering-container="gamesCtrl.filteringContainer"
				>
			</gj-game-filtering-tags>

			<div class="row">
				<div class="col-sm-6 col-md-3">

					<nav class="pills" ng-class="{ 'nav-justified': Screen.isXs }">
						<ul>
							<li>
								<a
									ui-sref="discover.channels.channel.games._fetch( { section: 'hot' } )"
									ui-sref-active="active"
									gj-no-auto-scroll
									gj-track-event="game-list:section-selector:hot"
									>
									{{ ::'games.list.sections_selector_hot' | translate }}
								</a>
							</li>
							<li>
								<a
									ui-sref="discover.channels.channel.games._fetch( { section: 'best' } )"
									ui-sref-active="active"
									gj-no-auto-scroll
									gj-track-event="game-list:section-selector:best"
									>
									{{ ::'games.list.sections_selector_best' | translate }}
								</a>
							</li>
							<li>
								<a
									ui-sref="discover.channels.channel.games._fetch( { section: 'new' } )"
									ui-sref-active="active"
									gj-no-auto-scroll
									gj-track-event="game-list:section-selector:new"
									>
									{{ ::'games.list.sections_selector_new' | translate }}
								</a>
							</li>
						</ul>
					</nav>

				</div>
				<div class="col-sm-6 col-md-5">

					<p class="text-muted small" ng-class="{ 'text-right': !Screen.isXs }">
						<span ng-if="listCtrl.gamesCount == 0" translate>games.list.games_count_none</span>

						<span
							ng-if="gamesCtrl.gamesCount > 0"
							translate
							translate-n="gamesCtrl.gamesCount"
							translate-plural="games.list.games_count"
							translate-scope="{ page: gamesCtrl.currentPage }"
							translate-comment="{{ page }} expands to the current page of games"
							>
							games.list.games_count
						</span>
					</p>

				</div>
				<div class="col-md-4 visible-md visible-lg">

					<gj-game-filtering-input
						gj-filtering-container="gamesCtrl.filteringContainer"
						>
					</gj-game-filtering-input>

				</div>
			</div>
		</div>

		<div ng-show="gamesCtrl.gamesCount">
			<ui-view></ui-view>

			<gj-pagination
				items-per-page="gamesCtrl.perPage"
				total-items="gamesCtrl.gamesCount"
				current-page="gamesCtrl.currentPage"
				on-page-change="Scroll.to( 'games', { animate: false } )">
			</gj-pagination>
		</div>

		<div ng-if="!gamesCtrl.gamesCount" class="alert alert-warning anim-fade-in no-animate-leave">
			<div class="container">
				<p translate>No games match your filters. <b>Zoinks!</b></p>
			</div>
		</div>

	</div>
</section>

<section class="section section-thin" ng-if="!Environment.isClient && !Screen.isXs">
	<gj-ad ad-size="leaderboard"></gj-ad>
</section>
